!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).precisioner={})}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function s(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=o(t);if(e){var i=o(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function f(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=1e6,h=1e6,p="[big.js] ",d=p+"Invalid ",v=d+"decimal places",y=p+"Division by zero",g={},b=void 0,m=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function w(t,e,r,n){var i=t.c;if(r===b&&(r=t.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error("[big.js] Invalid rounding mode");if(e<1)n=3===r&&(n||!!i[0])||0===e&&(1===r&&i[0]>=5||2===r&&(i[0]>5||5===i[0]&&(n||i[1]!==b))),i.length=1,n?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(n=1===r&&i[e]>=5||2===r&&(i[e]>5||5===i[e]&&(n||i[e+1]!==b||1&i[e-1]))||3===r&&(n||!!i[0]),i.length=e,n)for(;++i[--e]>9;)if(i[e]=0,0===e){++t.e,i.unshift(1);break}for(e=i.length;!i[--e];)i.pop()}return t}function k(t,e,r){var n=t.e,i=t.c.join(""),o=i.length;if(e)i=i.charAt(0)+(o>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>o)for(n-=o;n--;)i+="0";else n<o&&(i=i.slice(0,n)+"."+i.slice(n));else o>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}g.abs=function(){var t=new this.constructor(this);return t.s=1,t},g.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,o=r.s,u=t.s,s=r.e,c=t.e;if(!n[0]||!i[0])return n[0]?o:i[0]?-u:0;if(o!=u)return o;if(e=o<0,s!=c)return s>c^e?1:-1;for(u=(s=n.length)<(c=i.length)?s:c,o=-1;++o<u;)if(n[o]!=i[o])return n[o]>i[o]^e?1:-1;return s==c?0:s>c^e?1:-1},g.div=function(t){var e=this,r=e.constructor,n=e.c,i=(t=new r(t)).c,o=e.s==t.s?1:-1,u=r.DP;if(u!==~~u||u<0||u>l)throw Error(v);if(!i[0])throw Error(y);if(!n[0])return t.s=o,t.c=[t.e=0],t;var s,c,f,a,h,p=i.slice(),d=s=i.length,g=n.length,m=n.slice(0,s),k=m.length,x=t,E=x.c=[],T=0,j=u+(x.e=e.e-t.e)+1;for(x.s=o,o=j<0?0:j,p.unshift(0);k++<s;)m.push(0);do{for(f=0;f<10;f++){if(s!=(k=m.length))a=s>k?1:-1;else for(h=-1,a=0;++h<s;)if(i[h]!=m[h]){a=i[h]>m[h]?1:-1;break}if(!(a<0))break;for(c=k==s?i:p;k;){if(m[--k]<c[k]){for(h=k;h&&!m[--h];)m[h]=9;--m[h],m[k]+=10}m[k]-=c[k]}for(;!m[0];)m.shift()}E[T++]=a?f:++f,m[0]&&a?m[k]=n[d]||0:m=[n[d]]}while((d++<g||m[0]!==b)&&o--);return E[0]||1==T||(E.shift(),x.e--,j--),T>j&&w(x,j,r.RM,m[0]!==b),x},g.eq=function(t){return 0===this.cmp(t)},g.gt=function(t){return this.cmp(t)>0},g.gte=function(t){return this.cmp(t)>-1},g.lt=function(t){return this.cmp(t)<0},g.lte=function(t){return this.cmp(t)<1},g.minus=g.sub=function(t){var e,r,n,i,o=this,u=o.constructor,s=o.s,c=(t=new u(t)).s;if(s!=c)return t.s=-c,o.plus(t);var f=o.c.slice(),a=o.e,l=t.c,h=t.e;if(!f[0]||!l[0])return l[0]?t.s=-c:f[0]?t=new u(o):t.s=1,t;if(s=a-h){for((i=s<0)?(s=-s,n=f):(h=a,n=l),n.reverse(),c=s;c--;)n.push(0);n.reverse()}else for(r=((i=f.length<l.length)?f:l).length,s=c=0;c<r;c++)if(f[c]!=l[c]){i=f[c]<l[c];break}if(i&&(n=f,f=l,l=n,t.s=-t.s),(c=(r=l.length)-(e=f.length))>0)for(;c--;)f[e++]=0;for(c=e;r>s;){if(f[--r]<l[r]){for(e=r;e&&!f[--e];)f[e]=9;--f[e],f[r]+=10}f[r]-=l[r]}for(;0===f[--c];)f.pop();for(;0===f[0];)f.shift(),--h;return f[0]||(t.s=1,f=[h=0]),t.c=f,t.e=h,t},g.mod=function(t){var e,r=this,n=r.constructor,i=r.s,o=(t=new n(t)).s;if(!t.c[0])throw Error(y);return r.s=t.s=1,e=1==t.cmp(r),r.s=i,t.s=o,e?new n(r):(i=n.DP,o=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=o,this.minus(r.times(t)))},g.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},g.plus=g.add=function(t){var e,r,n,i=this,o=i.constructor;if(t=new o(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var u=i.e,s=i.c,c=t.e,f=t.c;if(!s[0]||!f[0])return f[0]||(s[0]?t=new o(i):t.s=i.s),t;if(s=s.slice(),e=u-c){for(e>0?(c=u,n=f):(e=-e,n=s),n.reverse();e--;)n.push(0);n.reverse()}for(s.length-f.length<0&&(n=f,f=s,s=n),e=f.length,r=0;e;s[e]%=10)r=(s[--e]=s[e]+f[e]+r)/10|0;for(r&&(s.unshift(r),++c),e=s.length;0===s[--e];)s.pop();return t.c=s,t.e=c,t},g.pow=function(t){var e=this,r=new e.constructor("1"),n=r,i=t<0;if(t!==~~t||t<-1e6||t>h)throw Error(d+"exponent");for(i&&(t=-t);1&t&&(n=n.times(e)),t>>=1;)e=e.times(e);return i?r.div(n):n},g.prec=function(t,e){if(t!==~~t||t<1||t>l)throw Error(d+"precision");return w(new this.constructor(this),t,e)},g.round=function(t,e){if(t===b)t=0;else if(t!==~~t||t<-l||t>l)throw Error(v);return w(new this.constructor(this),t+this.e+1,e)},g.sqrt=function(){var t,e,r,n=this,i=n.constructor,o=n.s,u=n.e,s=new i("0.5");if(!n.c[0])return new i(n);if(o<0)throw Error(p+"No square root");0===(o=Math.sqrt(n+""))||o===1/0?((e=n.c.join("")).length+u&1||(e+="0"),u=((u+1)/2|0)-(u<0||1&u),t=new i(((o=Math.sqrt(e))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+u)):t=new i(o+""),u=t.e+(i.DP+=4);do{r=t,t=s.times(r.plus(n.div(r)))}while(r.c.slice(0,u).join("")!==t.c.slice(0,u).join(""));return w(t,(i.DP-=4)+t.e+1,i.RM)},g.times=g.mul=function(t){var e,r=this,n=r.constructor,i=r.c,o=(t=new n(t)).c,u=i.length,s=o.length,c=r.e,f=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!o[0])return t.c=[t.e=0],t;for(t.e=c+f,u<s&&(e=i,i=o,o=e,f=u,u=s,s=f),e=new Array(f=u+s);f--;)e[f]=0;for(c=s;c--;){for(s=0,f=u+c;f>c;)s=e[f]+o[c]*i[f-c-1]+s,e[f--]=s%10,s=s/10|0;e[f]=s}for(s?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},g.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==b){if(t!==~~t||t<0||t>l)throw Error(v);for(r=w(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return k(r,!0,!!n)},g.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==b){if(t!==~~t||t<0||t>l)throw Error(v);for(t=t+(r=w(new r.constructor(r),t+r.e+1,e)).e+1;r.c.length<t;)r.c.push(0)}return k(r,!1,!!n)},g[Symbol.for("nodejs.util.inspect.custom")]=g.toJSON=g.toString=function(){var t=this,e=t.constructor;return k(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},g.toNumber=function(){var t=Number(k(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(p+"Imprecise conversion");return t},g.toPrecision=function(t,e){var r=this,n=r.constructor,i=r.c[0];if(t!==b){if(t!==~~t||t<1||t>l)throw Error(d+"precision");for(r=w(new n(r),t,e);r.c.length<t;)r.c.push(0)}return k(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)},g.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(p+"valueOf disallowed");return k(t,t.e<=e.NE||t.e>=e.PE,!0)};var x=function t(){function e(r){var n=this;if(!(n instanceof e))return r===b?t():new e(r);if(r instanceof e)n.s=r.s,n.e=r.e,n.c=r.c.slice();else{if("string"!=typeof r){if(!0===e.strict&&"bigint"!=typeof r)throw TypeError(d+"value");r=0===r&&1/r<0?"-0":String(r)}!function(t,e){var r,n,i;if(!m.test(e))throw Error(d+"number");t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".",""));(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length);for(i=e.length,n=0;n<i&&"0"==e.charAt(n);)++n;if(n==i)t.c=[t.e=0];else{for(;i>0&&"0"==e.charAt(--i););for(t.e=r-n-1,t.c=[],r=0;n<=i;)t.c[r++]=+e.charAt(n++)}}(n,r)}n.constructor=e}return e.prototype=g,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.strict=false,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}(),E=function(){function t(){e(this,t),this.queue=[]}return n(t,[{key:"pushTask",value:function(t,e){return this.queue.push({name:e,t:t}),this}},{key:"exec",value:function(){var e=null,r=t.execBefore(this.queue),n=r.hasValid,i=r.initTask;try{for(e=this.queue.shift().t();this.queue.length;)e=this.queue.shift().t(e)}catch(r){r.toString()===t.text.err&&(this.queue=[],e=!n&&t.text.invalid)}return i&&this.pushTask(i.t,i.name),e}}],[{key:"execBefore",value:function(e){var r=t.text,n=r.isValid,i=r.init;return e.reduce((function(t,e,r){return e.name===n&&(t.hasValid=!0),0===r&&e.name===i&&(t.initTask=e),t}),{hasValid:!1,initTask:null})}}]),t}();i(E,"text",{init:"init",isValid:"isValid",invalid:"Invalid Number",err:"Error: [big.js] Invalid number"});var T=function(){function t(){e(this,t)}return n(t,null,[{key:"toBig",value:function(t){return t instanceof x?t:new x(t)}},{key:"baseExecution",value:function(e,r){return e.slice(1).reduce((function(t,e){return t[r](e)}),t.toBig(e[0]))}},{key:"isNumber",value:function(e){return t.regs.number.test(e)}},{key:"helper",value:function(e,r){var n=f(e);return n.length?t[r].bind(null,n[0]):t[r]}},{key:"init",value:function(t){return t}},{key:"sqrt",value:function(e){return t.toBig(e).sqrt()}},{key:"toNumber",value:function(e){return t.toBig(e).toNumber()}},{key:"toRound",value:function(e){return t.toBig(e).round().toNumber()}},{key:"toFixed",value:function(e,r){return t.toBig(r).toFixed(e)}},{key:"toFixedMax",value:function(e,r){return parseFloat(t.toBig(r).toFixed(e))}},{key:"toThousandth",value:function(e){var r=t.toBig(e).toNumber();if(r%1==0)return String(r).replace(t.regs.thousand,",");if(r%1!=0){var n=String(r).split(".");return n[0].replace(t.regs.thousand,",")+".".concat(n[1])}}},{key:"toStructure",value:function(e){var r=t.toBig(e);return[Math.trunc(r.toNumber()),r.mod(1).toNumber()].filter(Boolean)}},{key:"isValid",value:function(e){return t.isNumber(e)}}]),t}();i(T,"version","0.0.2"),i(T,"regs",{thousand:/(?=\B(\d{3})+$)/g,number:/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i});var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(i,t);var r=c(i);function i(){return e(this,i),r.call(this)}return n(i,[{key:"add",value:function(){return i.fourCalculations.call(this,arguments,"plus")}},{key:"minus",value:function(){return i.fourCalculations.call(this,arguments,"minus")}},{key:"mul",value:function(){return i.fourCalculations.call(this,arguments,"times")}},{key:"div",value:function(){return i.fourCalculations.call(this,arguments,"div")}},{key:"pow",value:function(){return i.fourCalculations.call(this,arguments,"pow")}},{key:"sqrt",value:function(){return this.pushTask(T.helper(arguments,"sqrt"),"sqrt")}},{key:"toNumber",value:function(){return this.pushTask(T.helper(arguments,"toNumber"),"toNumber").exec()}},{key:"toRound",value:function(){return this.pushTask(T.helper(arguments,"toRound"),"toRound").exec()}},{key:"toFixed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,r=2===arguments.length?function(){return T.toFixed(t,e)}:function(e){return T.toFixed(t,e)};return this.pushTask(r,"toFixed").exec()}},{key:"toFixedMax",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,r=2===arguments.length?function(){return T.toFixedMax(t,e)}:function(e){return T.toFixedMax(t,e)};return this.pushTask(r,"toFixedMax").exec()}},{key:"toThousandth",value:function(){return this.pushTask(T.helper(arguments,"toThousandth"),"toThousandth").exec()}},{key:"toStructure",value:function(){return this.pushTask(T.helper(arguments,"toStructure"),"toStructure").exec()}},{key:"isValid",value:function(){return this.pushTask(T.helper(arguments,"isValid"),"isValid").exec()}}],[{key:"fourCalculations",value:function(t,e){return t.length?this.pushTask((function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return T.baseExecution(n.length?[].concat(n,f(t)):f(t),e)}),e):this}},{key:"init",value:function(t){return this.pushTask(T.init.bind(null,t),"init")}}]),i}(E);function O(t){var e=new j;return arguments.length?j.init.call(e,t):e}t.default=O,t.n=O,Object.defineProperty(t,"__esModule",{value:!0})}));
